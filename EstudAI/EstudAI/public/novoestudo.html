<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Novo Estudo</title>
    <link rel="shortcut icon" href="assets/logokbeca.ico" type="image/x-icon">
    <link rel="stylesheet" href="novoestudo.css">
    <link rel="stylesheet" href="global.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>

  <div class="home-bar">
    <nav>
      <a href="index.html" class="home">INICIO</a>
      <a href="dashboard.html">DASHBOARD</a>
      <a href="#">SOBRE</a>
      <h1 class="logo">EstudAI</h1>
      <a href="index.html" class="btn-logo"></a>
    </nav>
  </div>

  
  <div class="login">
      <a href="sign-in.html" class="login-link">LOGIN</a>
    </div>
    
    <img src="assets/user.png" id="userProfile" onclick="toggleMenu()">
    
    <div id="subMenu" class="sub-menu-wrap">
      <div class="sub-menu">
        <div class="user-info">
          <img src="assets/user.png">
          <h3 class="username" id="username">Usu√°rio</h3>
        </div>
        <hr>
        
        <a href="perfil.html" class="sub-menu-link">
          <img src="assets/profile.png">
          <p>Perfil</p>
          <span>></span>
        </a>
        
        <a href="dashboard.html" class="sub-menu-link">
          <img src="assets/profile.png">
        <p>Dashboard</p>
        <span>></span>
      </a>
      
      <a href="#" class="sub-menu-link">
        <img src="assets/setting.png">
        <p>Miss√µes Di√°rias</p>
        <span>></span>
      </a>
      
      <a href="#" class="sub-menu-link">
        <img src="assets/help.png">
        <p>Ajuda</p>
        <span>></span>
      </a>
      
      <a href="#" class="sub-menu-link">
        <img src="assets/logout.png">
        <p>Sair</p>
        <span>></span>
      </a>
    </div>
  </div>
  
  <div id="openMissions" class="missions">
    <button id="btnMissions" class="btnMissions" onclick="toggleMissions()">
      <img src="assets/missions.png" alt="Miss√µes">
    </button>

    <div class="missions-container">
      <h3>üéØ MISS√ïES DI√ÅRIAS</h3>

      <div class="mission-item">
        <label>
          <input type="checkbox" id="studyMission" disabled>
          <span>Estude por 1 hora</span>
        </label>
      </div>

      <div class="mission-item">
        <label>
          <input type="checkbox" id="quizMission" disabled>
          <span>Responda 1 quiz</span>
        </label>
      </div>
    </div>
  </div>

  <main>
    <div id="stopwatch">
      <h2 id="timer">00:00:00:00</h2>
      
      <div id="actions">
        <button id="reset">
          <i class="fa-solid fa-rotate-right"></i>
        </button>
        
        <button id="power" action="start">
            <i class="fa-solid fa-play"></i>
        </button>

        <button id="mark">
            <i class="fa-solid fa-flag"></i>
        </button>
      </div>

      <div id="marks-list"></div>
    </div>

  <a href="quiz.html" class="encerrar"> Encerrar Estudo</a>
  </main>

  <script src="script-site.js"></script>
  <script src="user-state.js"></script>
  <script src="missions.js"></script>

  <script>
  let subMenu = document.getElementById("subMenu");

  function toggleMenu(){
      subMenu.classList.toggle("open-menu");
  }

  let openMissions = document.getElementById("openMissions");
    
    function toggleMissions(){
      openMissions.classList.toggle("open-missions");
    }

    // Pega o usu√°rio do localStorage
    const usuario = JSON.parse(localStorage.getItem("usuario") || "{}");

    // Pega o nome, ou "Usu√°rio" como fallback
    const nomeUsuario = usuario.nome || "Usu√°rio";

    // Atualiza o H3
    document.getElementById("username").textContent = nomeUsuario;
  </script>
</body>
</html>
