<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EstudAI</title>
  <link rel="shortcut icon" href="assets/logokbeca.ico" type="image/x-icon">
  <link rel="stylesheet" href="perfil.css">
  <link rel="stylesheet" href="global.css">
</head>
<body>
  <div class="home-bar">
    <nav>
      <a href="index.html" class="home">INICIO</a>
      <a href="dashboard.html">DASHBOARD</a>
      <a href="#">SOBRE</a>
      <h1 class="logo">EstudAI</h1>
      <a href="index.html" class="btn-logo"></a>
    </nav>
  </div>

  <div class="containerProfile">
    <div class="user-info">
      <img src="assets/user.png">
      <h3 class="perfilNome" id="perfilNome">Usu√°rio</h3>
    </div>
  </div>

  <div class="login">
    <a href="sign-in.html" class="login-link">LOGIN</a>
  </div>
  
  <img src="assets/user.png" id="userProfile" onclick="toggleMenu()">
  
  <div id="subMenu" class="sub-menu-wrap">
    <div class="sub-menu">
      <div class="user-info">
        <img src="assets/logokbeca.png">
        <h3 class="username" id="username">Usu√°rio</h3>
      </div>
      <hr>
      
      <a href="perfil.html" class="sub-menu-link">
        <img src="assets/profile.png">
        <p>Perfil</p>
        <span>></span>
      </a>
      
      <a href="dashboard.html" class="sub-menu-link">
        <img src="assets/profile.png">
        <p>Dashboard</p>
        <span>></span>
      </a>
      
      <a href="#" class="sub-menu-link">
        <img src="assets/setting.png">
        <p>Miss√µes Di√°rias</p>
        <span>></span>
      </a>
      
      <a href="#" class="sub-menu-link">
        <img src="assets/help.png">
        <p>Ajuda</p>
        <span>></span>
      </a>

      <a href="#" id="logoutButton" class="sub-menu-link">
        <img src="assets/logout.png">
        <p>Sair</p>
        <span>></span>
      </a>
    </div>
  </div>

  <div id="openMissions" class="missions">
    <button id="btnMissions" class="btnMissions" onclick="toggleMissions()">
      <img src="assets/missions.png" alt="Miss√µes">
    </button>

    <div class="missions-container">
      <h3>üéØ MISS√ïES DI√ÅRIAS</h3>

      <div class="mission-item">
        <label>
          <input type="checkbox" id="studyMission" disabled>
          <span>Estude por 1 hora</span>
        </label>
      </div>

      <div class="mission-item">
        <label>
          <input type="checkbox" id="quizMission" disabled>
          <span>Responda 1 quiz</span>
        </label>
      </div>
    </div>
  </div>

  <main>
    <div class="perfilMoedas">
      <h2>üí∞ <span id="perfilMoedas"></span></h2>
    </div>
  </main>

  <script>
    let subMenu = document.getElementById("subMenu");
    
    function toggleMenu(){
      subMenu.classList.toggle("open-menu");
    }

    let openMissions = document.getElementById("openMissions");
    
    function toggleMissions(){
      openMissions.classList.toggle("open-missions");
    }

    // Pega o usu√°rio do localStorage
    const usuario = JSON.parse(localStorage.getItem("usuario") || "{}");

    // Pega o nome, ou "Usu√°rio" como fallback
    const nomeUsuario = usuario.nome || "Usu√°rio";

    // Atualiza o H3
    document.getElementById("username").textContent = nomeUsuario;
    </script>

  <script src="perfil.js"></script>
  <script src="missions.js"></script>
  <script src="user-state.js"></script>
  
</body>
</html>